{"ast":null,"code":"function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useRef, useState } from 'react';\nimport { Container } from './styles';\nimport { Input, Button } from '@material-ui/core';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nvar serverUrl = 'http://localhost:3001';\n\nvar Login = function Login() {\n  var router = useRouter();\n  var emailRef = useRef();\n  var passwordRef = useRef();\n  var dispatch = useDispatch();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var state = useSelector(function (state) {\n    return state;\n  });\n  console.log(state);\n\n  var handleSubmit = function handleSubmit() {\n    var name = nameRef.current.value;\n    var email = emailRef.current.value;\n    var password = passwordRef.current.value;\n\n    if (email.length < 0) {\n      setError('Please enter valid email id');\n    }\n\n    if (password.length < 4) {\n      setError('Please Enter password of atleast 4 characters');\n    }\n\n    ;\n    var response = axios.post(serverUrl + '/login', {\n      email: email,\n      password: password\n    });\n    response.then(function (data) {\n      if (data.data === \"Wrong password, unable to login\") {\n        setError('You have enteredt wrong password or email');\n        return;\n      }\n\n      if (data.data === 'User not found') {\n        setError('Please register to continue');\n        router.push({\n          pathname: '/register'\n        });\n        return;\n      }\n\n      dispatch({\n        type: 'LOGIN_EMAIL',\n        payload: {\n          email: email,\n          name: name\n        }\n      });\n      setError('Successfully logged in');\n      router.push({\n        pathname: '/car-search'\n      });\n    })[\"catch\"](function (e) {\n      return e;\n    });\n  };\n\n  return React.createElement(Container, null, React.createElement(Input, {\n    placeholder: \"Enter name\",\n    name: \"name\",\n    type: \"name\",\n    inputRef: nameRef\n  }), React.createElement(\"br\", null), React.createElement(Input, {\n    placeholder: \"Enter email\",\n    name: \"email\",\n    type: \"email\",\n    inputRef: emailRef\n  }), React.createElement(\"br\", null), React.createElement(Input, {\n    placeholder: \"Enter password\",\n    name: \"password\",\n    type: \"password\",\n    inputRef: passwordRef\n  }), React.createElement(\"br\", null), React.createElement(\"br\", null), error ? React.createElement(\"p\", null, error) : null, React.createElement(\"br\", null), React.createElement(\"br\", null), React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      return handleSubmit();\n    }\n  }, \"Login\"));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/shreyvijayvargiya/Desktop/instaCar/Components/Login/index.jsx"],"names":["React","useRef","useState","Container","Input","Button","axios","useDispatch","useSelector","useRouter","serverUrl","Login","router","emailRef","passwordRef","dispatch","error","setError","state","console","log","handleSubmit","name","nameRef","current","value","email","password","length","response","post","then","data","push","pathname","type","payload","e"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport { Container } from './styles';\nimport { Input, Button } from '@material-ui/core';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\n\nconst serverUrl = 'http://localhost:3001'; \n\nconst Login = () => {\n\n\tconst router = useRouter();\n\n\tconst emailRef = useRef();\n\tconst passwordRef = useRef();\n\n\tconst dispatch = useDispatch();\n\tconst [error, setError] = useState();\n\n\tconst state = useSelector(state => state);\n\tconsole.log(state);\n\tconst handleSubmit = ( ) => {\n\t\tconst name = nameRef.current.value;\n\t\tconst email = emailRef.current.value;\n\t\tconst password = passwordRef.current.value;\n\t\t\n\t\tif (email.length < 0 ) {\n\t\t\tsetError('Please enter valid email id');\n\t\t}\n\t\tif(password.length < 4){\n\t\t\tsetError('Please Enter password of atleast 4 characters');\n\t\t};\n\t\tconst response = axios.post(serverUrl + '/login', { email, password }); \n\t\tresponse.then((data) => {\n\t\t\tif(data.data === \"Wrong password, unable to login\"){\n\t\t\t\tsetError('You have enteredt wrong password or email');\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(data.data === 'User not found' ){\n\t\t\t\tsetError('Please register to continue');\n\t\t\t\trouter.push({\n\t\t\t\t\tpathname: '/register'\n\t\t\t\t});\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdispatch({ type: 'LOGIN_EMAIL', payload: { email, name } });\n\t\t\tsetError('Successfully logged in');\n\t\t\trouter.push({\n\t\t\t\tpathname: '/car-search',\n\n\t\t\t});\n\t\t}).catch((e) =>e);\n\t}\nreturn (\n\t<Container>\n\t\t<Input placeholder=\"Enter name\" name=\"name\" type=\"name\" inputRef={nameRef} /><br />\n\t\t<Input placeholder=\"Enter email\" name=\"email\" type=\"email\" inputRef={emailRef} /><br />\n\t\t<Input placeholder=\"Enter password\" name=\"password\"  type=\"password\" inputRef={passwordRef} /><br /><br />\n\t\t{error ? <p>{error}</p>: null}<br /><br />\n \t\t<Button variant=\"contained\" color=\"primary\" onClick={() => handleSubmit()}>Login</Button>\n\t</Container>\n  )\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}